{"version":3,"file":"swim-cellular.js","sources":["../../node_modules/tslib/tslib.es6.js","../../node_modules/@swim/googlemap/main/GoogleMapProjection.ts","../../node_modules/@swim/googlemap/main/GoogleMapView.ts","../../node_modules/@swim/googlemap/main/GoogleMapViewController.ts","../../node_modules/@swim/esrimap/main/EsriProjection.ts","../../node_modules/@swim/esrimap/main/EsriView.ts","../../node_modules/@swim/esrimap/main/EsriViewController.ts","../../node_modules/@swim/esrimap/main/EsriMapViewProjection.ts","../../node_modules/@swim/esrimap/main/EsriMapView.ts","../../node_modules/@swim/esrimap/main/EsriMapViewController.ts","../../node_modules/@swim/esrimap/main/EsriSceneViewProjection.ts","../../node_modules/@swim/esrimap/main/EsriSceneView.ts","../../node_modules/@swim/esrimap/main/EsriSceneViewController.ts","../../src/main/typescript/map/SiteMapView.ts","../../src/main/typescript/map/RegionMapView.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyGeoPoint, GeoPoint, GeoBox, GeoProjection} from \"@swim/map\";\nimport {GoogleMapView} from \"./GoogleMapView\";\n\nexport class GoogleMapProjection implements GeoProjection {\n  /** @hidden */\n  readonly _mapView: GoogleMapView;\n\n  constructor(mapView: GoogleMapView) {\n    this._mapView = mapView;\n  }\n\n  get map(): google.maps.Map {\n    return this._mapView._map;\n  }\n\n  get bounds(): GeoBox {\n    const bounds = this._mapView._map.getBounds()!;\n    const sw = bounds.getSouthWest();\n    const ne = bounds.getNorthEast();\n    return new GeoBox(sw.lng(), sw.lat(), ne.lng(), ne.lat());\n  }\n\n  project(geoPoint: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    let geoPoint: google.maps.LatLng;\n    if (typeof lng === \"number\") {\n      geoPoint = new google.maps.LatLng(lat!, lng);\n    } else if (Array.isArray(lng)) {\n      geoPoint = new google.maps.LatLng(lng[1], lng[0]);\n    } else {\n      geoPoint = new google.maps.LatLng(lng.lat, lng.lng);\n    }\n    const projection = this._mapView._mapOverlay!.getProjection()!;\n    const point = projection.fromLatLngToContainerPixel(geoPoint);\n    return new PointR2(point.x, point.y);\n  }\n\n  unproject(viewPoint: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    let viewPoint: google.maps.Point;\n    if (typeof x === \"number\") {\n      viewPoint = new google.maps.Point(x, y!);\n    } else if (Array.isArray(x)) {\n      viewPoint = new google.maps.Point(x[0], x[1]);\n    } else {\n      viewPoint = new google.maps.Point(x.x, x.y);\n    }\n    const projection = this._mapView._mapOverlay!.getProjection()!;\n    const point = projection.fromContainerPixelToLatLng(viewPoint);\n    return new GeoPoint(point.lng(), point.lat());\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {ViewFlags, View, RenderedViewContext, RenderedView, ViewHtml, HtmlView, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, GeoBox, MapViewContext, MapGraphicsView} from \"@swim/map\";\nimport {GoogleMapProjection} from \"./GoogleMapProjection\";\nimport {GoogleMapViewObserver} from \"./GoogleMapViewObserver\";\nimport {GoogleMapViewController} from \"./GoogleMapViewController\";\n\nexport class GoogleMapView extends MapGraphicsView {\n  /** @hidden */\n  readonly _map: google.maps.Map;\n  /** @hidden */\n  _geoProjection: GoogleMapProjection;\n  /** @hidden */\n  _mapOverlay: google.maps.OverlayView | null;\n  /** @hidden */\n  _mapZoom: number;\n  /** @hidden */\n  _mapHeading: number;\n  /** @hidden */\n  _mapTilt: number;\n\n  constructor(map: google.maps.Map) {\n    super();\n    this.onMapRender = this.onMapRender.bind(this);\n    this._map = map;\n    this._geoProjection = new GoogleMapProjection(this);\n    this._mapOverlay = null;\n    this._mapZoom = map.getZoom();\n    this._mapHeading = map.getHeading();\n    this._mapTilt = map.getTilt();\n    this.initMap(map);\n  }\n\n  get map(): google.maps.Map {\n    return this._map;\n  }\n\n  protected initMap(map: google.maps.Map): void {\n    // hook\n  }\n\n  get viewController(): GoogleMapViewController | null {\n    return this._viewController;\n  }\n\n  project(lnglat: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    return this._geoProjection.project.apply(this._geoProjection, arguments);\n  }\n\n  unproject(point: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    return this._geoProjection.unproject.apply(this._geoProjection, arguments);\n  }\n\n  get geoProjection(): GoogleMapProjection {\n    return this._geoProjection;\n  }\n\n  setGeoProjection(geoProjection: GoogleMapProjection): void {\n    this.willSetGeoProjection(geoProjection);\n    this._geoProjection = geoProjection;\n    this.onSetGeoProjection(geoProjection);\n    this.didSetGeoProjection(geoProjection);\n  }\n\n  protected willSetGeoProjection(geoProjection: GoogleMapProjection): void {\n    this.willObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewWillSetGeoProjection !== void 0) {\n        viewObserver.viewWillSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  protected onSetGeoProjection(geoProjection: GoogleMapProjection): void {\n    if (!this.isHidden() && !this.isCulled()) {\n      this.requireUpdate(View.NeedsProject, true);\n    }\n  }\n\n  protected didSetGeoProjection(geoProjection: GoogleMapProjection): void {\n    this.didObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewDidSetGeoProjection !== void 0) {\n        viewObserver.viewDidSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  get mapOverlay(): google.maps.OverlayView | null {\n    return this._mapOverlay;\n  }\n\n  get mapZoom(): number {\n    return this._mapZoom;\n  }\n\n  setMapZoom(newMapZoom: number): void {\n    const oldMapZoom = this._mapZoom;\n    if (oldMapZoom !== newMapZoom) {\n      this.willSetMapZoom(newMapZoom, oldMapZoom);\n      this._mapZoom = newMapZoom;\n      this.onSetMapZoom(newMapZoom, oldMapZoom);\n      this.didSetMapZoom(newMapZoom, oldMapZoom);\n    }\n  }\n\n  protected willSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewWillSetMapZoom !== void 0) {\n        viewObserver.viewWillSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  protected onSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    // hook\n  }\n\n  protected didSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: GoogleMapViewObserver): void {\n      if (viewObserver.viewDidSetMapZoom !== void 0) {\n        viewObserver.viewDidSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  get mapHeading(): number {\n    return this._mapHeading;\n  }\n\n  get mapTilt(): number {\n    return this._mapTilt;\n  }\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeProcess(processFlags, viewContext);\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeDisplay(displayFlags, viewContext);\n  }\n\n  childViewContext(childView: View, viewContext: MapViewContext): MapViewContext {\n    return viewContext;\n  }\n\n  mapViewContext(viewContext: RenderedViewContext): MapViewContext {\n    const mapViewContext = Object.create(viewContext);\n    mapViewContext.geoProjection = this._geoProjection;\n    mapViewContext.geoFrame = this.geoFrame;\n    mapViewContext.mapZoom = this._mapZoom;\n    mapViewContext.mapHeading = this._mapHeading;\n    mapViewContext.mapTilt = this._mapTilt;\n    return mapViewContext;\n  }\n\n  get geoFrame(): GeoBox {\n    const bounds = this._map.getBounds()!;\n    const sw = bounds.getSouthWest();\n    const ne = bounds.getNorthEast();\n    return new GeoBox(sw.lng(), sw.lat(), ne.lng(), ne.lat());\n  }\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null {\n    viewContext = this.mapViewContext(viewContext);\n    return super.hitTest(x, y, viewContext);\n  }\n\n  protected onMapRender(): void {\n    this._mapHeading = this._map.getHeading();\n    this._mapTilt = this._map.getTilt();\n    this.setMapZoom(this._map.getZoom());\n    this.setGeoProjection(this._geoProjection);\n  }\n\n  overlayCanvas(): CanvasView | null {\n    if (this._parentView !== null) {\n      return this.canvasView;\n    } else {\n      class GoogleMapOverlayView extends google.maps.OverlayView {\n        readonly _mapView: GoogleMapView;\n        _canvasView: CanvasView | null;\n        constructor(mapView: GoogleMapView) {\n          super();\n          this._mapView = mapView;\n          this._canvasView = null;\n        }\n        onAdd(): void {\n          const panes = this.getPanes();\n          const overlayMouseTarget = GoogleMapView.materializeAncestors(panes.overlayMouseTarget as HTMLElement);\n          const overlayContainer = overlayMouseTarget.parentView as HtmlView;\n          const container = overlayContainer.parentView as HtmlView;\n          this._canvasView = container.append(\"canvas\");\n          this._canvasView.append(this._mapView);\n        }\n        onRemove(): void {\n          if (this._canvasView !== null) {\n            this._canvasView.remove();\n            this._canvasView = null;\n          }\n        }\n        draw(): void {\n          this._mapView.onMapRender();\n        }\n      }\n      const mapOverlay = new GoogleMapOverlayView(this);\n      mapOverlay.setMap(this._map);\n      this._mapOverlay = mapOverlay;\n      return mapOverlay._canvasView;\n    }\n  }\n\n  private static materializeAncestors(node: HTMLElement): HtmlView {\n    const parentNode = node.parentNode;\n    if (parentNode instanceof HTMLElement && !(parentNode as ViewHtml).view) {\n      GoogleMapView.materializeAncestors(parentNode);\n    }\n    return View.fromNode(node);\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {MapGraphicsViewController} from \"@swim/map\";\nimport {GoogleMapProjection} from \"./GoogleMapProjection\";\nimport {GoogleMapView} from \"./GoogleMapView\";\nimport {GoogleMapViewObserver} from \"./GoogleMapViewObserver\";\n\nexport class GoogleMapViewController<V extends GoogleMapView = GoogleMapView> extends MapGraphicsViewController<V> implements GoogleMapViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: GoogleMapProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: GoogleMapProjection, view: V): void {\n    // hook\n  }\n\n  viewWillSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n\n  viewDidSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {GeoProjection} from \"@swim/map\";\n\nexport interface EsriProjection extends GeoProjection {\n  readonly map: __esri.View;\n}\n\n/** @hidden */\nexport const EsriProjection = {\n  webMercatorUtils: void 0 as __esri.webMercatorUtils | undefined,\n\n  init(): void {\n    if (EsriProjection.webMercatorUtils === void 0) {\n      (window.require as any)([\"esri/geometry/support/webMercatorUtils\"], function (webMercatorUtils: __esri.webMercatorUtils): void {\n        EsriProjection.webMercatorUtils = webMercatorUtils;\n      });\n    }\n  },\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {ViewFlags, View, RenderedViewContext, RenderedView, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, MapViewContext, MapGraphicsView} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriViewObserver} from \"./EsriViewObserver\";\nimport {EsriViewController} from \"./EsriViewController\";\n\nexport abstract class EsriView extends MapGraphicsView {\n  constructor() {\n    super();\n    EsriProjection.init();\n  }\n\n  abstract get map(): __esri.View;\n\n  get viewController(): EsriViewController | null {\n    return this._viewController;\n  }\n\n  abstract project(lnglat: AnyGeoPoint): PointR2;\n  abstract project(lng: number, lat: number): PointR2;\n\n  abstract unproject(point: AnyPointR2): GeoPoint;\n  abstract unproject(x: number, y: number): GeoPoint;\n\n  abstract get geoProjection(): EsriProjection;\n\n  protected willSetGeoProjection(geoProjection: EsriProjection): void {\n    this.willObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewWillSetGeoProjection !== void 0) {\n        viewObserver.viewWillSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  protected onSetGeoProjection(geoProjection: EsriProjection): void {\n    if (!this.isHidden() && !this.isCulled()) {\n      this.requireUpdate(View.NeedsProject, false);\n    }\n  }\n\n  protected didSetGeoProjection(geoProjection: EsriProjection): void {\n    this.didObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewDidSetGeoProjection !== void 0) {\n        viewObserver.viewDidSetGeoProjection(geoProjection, this);\n      }\n    });\n  }\n\n  abstract get mapZoom(): number;\n\n  protected willSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewWillSetMapZoom !== void 0) {\n        viewObserver.viewWillSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  protected onSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    // hook\n  }\n\n  protected didSetMapZoom(newMapZoom: number, oldMapZoom: number): void {\n    this.didObserve(function (viewObserver: EsriViewObserver): void {\n      if (viewObserver.viewDidSetMapZoom !== void 0) {\n        viewObserver.viewDidSetMapZoom(newMapZoom, oldMapZoom, this);\n      }\n    });\n  }\n\n  abstract get mapHeading(): number;\n\n  abstract get mapTilt(): number;\n\n  cascadeProcess(processFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeProcess(processFlags, viewContext);\n  }\n\n  cascadeDisplay(displayFlags: ViewFlags, viewContext: RenderedViewContext): void {\n    viewContext = this.mapViewContext(viewContext);\n    super.cascadeDisplay(displayFlags, viewContext);\n  }\n\n  childViewContext(childView: View, viewContext: MapViewContext): MapViewContext {\n    return viewContext;\n  }\n\n  mapViewContext(viewContext: RenderedViewContext): MapViewContext {\n    const mapViewContext = Object.create(viewContext);\n    mapViewContext.geoProjection = this.geoProjection;\n    mapViewContext.geoFrame = this.geoFrame;\n    mapViewContext.mapZoom = this.mapZoom;\n    mapViewContext.mapHeading = this.mapHeading;\n    mapViewContext.mapTilt = this.mapTilt;\n    return mapViewContext;\n  }\n\n  hitTest(x: number, y: number, viewContext: RenderedViewContext): RenderedView | null {\n    viewContext = this.mapViewContext(viewContext);\n    return super.hitTest(x, y, viewContext);\n  }\n\n  abstract overlayCanvas(): CanvasView | null;\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {MapGraphicsViewController} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriView} from \"./EsriView\";\nimport {EsriViewObserver} from \"./EsriViewObserver\";\n\nexport class EsriViewController<V extends EsriView = EsriView> extends MapGraphicsViewController<V> implements EsriViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: EsriProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: EsriProjection, view: V): void {\n    // hook\n  }\n\n  viewWillSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n\n  viewDidSetMapZoom(newMapZoom: number, oldMapZoom: number, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\n\nexport class EsriMapViewProjection implements EsriProjection {\n  /** @hidden */\n  readonly _map: __esri.MapView;\n\n  constructor(map: __esri.MapView) {\n    EsriProjection.init();\n    this._map = map;\n  }\n\n  get map(): __esri.MapView {\n    return this._map;\n  }\n\n  get bounds(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  project(geoPoint: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    let geoPoint: __esri.Point;\n    if (typeof lng === \"number\") {\n      geoPoint = {x: lng, y: lat!, spatialReference: {wkid: 4326}} as __esri.Point;\n    } else if (Array.isArray(lng)) {\n      geoPoint = {x: lng[0], y: lng[1], spatialReference: {wkid: 4326}} as __esri.Point;\n    } else {\n      geoPoint = {x: lng.lng, y: lng.lat, spatialReference: {wkid: 4326}} as __esri.Point;\n    }\n    const point = this._map.toScreen(geoPoint);\n    return point !== null ? new PointR2(point.x, point.y) : PointR2.origin();\n  }\n\n  unproject(viewPoint: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    let viewPoint: __esri.ScreenPoint;\n    if (typeof x === \"number\") {\n      viewPoint = {x: x, y: y!};\n    } else if (Array.isArray(x)) {\n      viewPoint = {x: x[0], y: x[1]};\n    } else {\n      viewPoint = x;\n    }\n    const point = this._map.toMap(viewPoint);\n    return point !== null ? new GeoPoint(point.longitude, point.latitude) : GeoPoint.origin();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {View, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriView} from \"./EsriView\";\nimport {EsriMapViewProjection} from \"./EsriMapViewProjection\";\nimport {EsriMapViewController} from \"./EsriMapViewController\";\n\nexport class EsriMapView extends EsriView {\n  /** @hidden */\n  readonly _map: __esri.MapView;\n  /** @hidden */\n  _geoProjection: EsriMapViewProjection;\n  /** @hidden */\n  _mapZoom: number;\n  /** @hidden */\n  _mapHeading: number;\n\n  constructor(map: __esri.MapView) {\n    super();\n    this.onMapRender = this.onMapRender.bind(this);\n    this._map = map;\n    this._geoProjection = new EsriMapViewProjection(this._map);\n    this._mapZoom = map.zoom;\n    this._mapHeading = map.rotation;\n    this.initMap(this._map);\n  }\n\n  get map(): __esri.MapView {\n    return this._map;\n  }\n\n  protected initMap(map: __esri.MapView): void {\n    map.watch(\"extent\", this.onMapRender);\n  }\n\n  get viewController(): EsriMapViewController | null {\n    return this._viewController;\n  }\n\n  project(lnglat: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    return this._geoProjection.project.apply(this._geoProjection, arguments);\n  }\n\n  unproject(point: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    return this._geoProjection.unproject.apply(this._geoProjection, arguments);\n  }\n\n  get geoProjection(): EsriMapViewProjection {\n    return this._geoProjection;\n  }\n\n  setGeoProjection(geoProjection: EsriMapViewProjection): void {\n    this.willSetGeoProjection(geoProjection);\n    this._geoProjection = geoProjection;\n    this.onSetGeoProjection(geoProjection);\n    this.didSetGeoProjection(geoProjection);\n  }\n\n  get mapZoom(): number {\n    return this._mapZoom;\n  }\n\n  setMapZoom(newMapZoom: number): void {\n    const oldMapZoom = this._mapZoom;\n    if (oldMapZoom !== newMapZoom) {\n      this.willSetMapZoom(newMapZoom, oldMapZoom);\n      this._mapZoom = newMapZoom;\n      this.onSetMapZoom(newMapZoom, oldMapZoom);\n      this.didSetMapZoom(newMapZoom, oldMapZoom);\n    }\n  }\n\n  get mapHeading(): number {\n    return this._mapHeading;\n  }\n\n  get mapTilt(): number {\n    return 0;\n  }\n\n  get geoFrame(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  protected onMapRender(): void {\n    this._mapHeading = this._map.rotation;\n    this.setMapZoom(this._map.zoom);\n    this.setGeoProjection(this._geoProjection);\n  }\n\n  overlayCanvas(): CanvasView | null {\n    if (this._parentView !== null) {\n      return this.canvasView;\n    } else {\n      const map = this._map;\n      const container = View.fromNode(map.container);\n      const esriViewRoot = View.fromNode(container.node.querySelector(\".esri-view-root\") as HTMLDivElement);\n      const esriOverlaySurface = View.fromNode(esriViewRoot.node.querySelector(\".esri-overlay-surface\") as HTMLDivElement);\n      const canvas = esriOverlaySurface.append(\"canvas\");\n      canvas.setEventSurface(esriViewRoot.node);\n      canvas.append(this);\n      return canvas;\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {EsriViewController} from \"./EsriViewController\";\nimport {EsriMapViewProjection} from \"./EsriMapViewProjection\";\nimport {EsriMapView} from \"./EsriMapView\";\nimport {EsriMapViewObserver} from \"./EsriMapViewObserver\";\n\nexport class EsriMapViewController<V extends EsriMapView = EsriMapView> extends EsriViewController<V> implements EsriMapViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: EsriMapViewProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: EsriMapViewProjection, view: V): void {\n    // hook\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\n\nexport class EsriSceneViewProjection implements EsriProjection {\n  /** @hidden */\n  readonly _map: __esri.SceneView;\n\n  constructor(map: __esri.SceneView) {\n    EsriProjection.init();\n    this._map = map;\n  }\n\n  get map(): __esri.SceneView {\n    return this._map;\n  }\n\n  get bounds(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  project(geoPoint: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    let geoPoint: __esri.Point;\n    if (typeof lng === \"number\") {\n      geoPoint = {x: lng, y: lat!, spatialReference: {wkid: 4326}} as __esri.Point;\n    } else if (Array.isArray(lng)) {\n      geoPoint = {x: lng[0], y: lng[1], spatialReference: {wkid: 4326}} as __esri.Point;\n    } else {\n      geoPoint = {x: lng.lng, y: lng.lat, spatialReference: {wkid: 4326}} as __esri.Point;\n    }\n    const point = this._map.toScreen(geoPoint);\n    return point !== null ? new PointR2(point.x, point.y) : PointR2.origin();\n  }\n\n  unproject(viewPoint: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    let viewPoint: __esri.ScreenPoint;\n    if (typeof x === \"number\") {\n      viewPoint = {x: x, y: y!};\n    } else if (Array.isArray(x)) {\n      viewPoint = {x: x[0], y: x[1]};\n    } else {\n      viewPoint = x;\n    }\n    const point = this._map.toMap(viewPoint);\n    return point !== null ? new GeoPoint(point.longitude, point.latitude) : GeoPoint.origin();\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {AnyPointR2, PointR2} from \"@swim/math\";\nimport {View, CanvasView} from \"@swim/view\";\nimport {AnyGeoPoint, GeoPoint, GeoBox} from \"@swim/map\";\nimport {EsriProjection} from \"./EsriProjection\";\nimport {EsriView} from \"./EsriView\";\nimport {EsriSceneViewProjection} from \"./EsriSceneViewProjection\";\nimport {EsriSceneViewController} from \"./EsriSceneViewController\";\n\nexport class EsriSceneView extends EsriView {\n  /** @hidden */\n  readonly _map: __esri.SceneView;\n  /** @hidden */\n  _geoProjection: EsriSceneViewProjection;\n  /** @hidden */\n  _mapZoom: number;\n  /** @hidden */\n  _mapHeading: number;\n  /** @hidden */\n  _mapTilt: number;\n\n  constructor(map: __esri.SceneView) {\n    super();\n    this.onMapRender = this.onMapRender.bind(this);\n    this._map = map;\n    this._geoProjection = new EsriSceneViewProjection(this._map);\n    this._mapZoom = map.zoom;\n    this._mapHeading = map.camera.heading;\n    this._mapTilt = map.camera.tilt;\n    this.initMap(this._map);\n  }\n\n  get map(): __esri.SceneView {\n    return this._map;\n  }\n\n  protected initMap(map: __esri.SceneView): void {\n    map.watch(\"extent\", this.onMapRender);\n  }\n\n  get viewController(): EsriSceneViewController | null {\n    return this._viewController;\n  }\n\n  project(lnglat: AnyGeoPoint): PointR2;\n  project(lng: number, lat: number): PointR2;\n  project(lng: AnyGeoPoint | number, lat?: number): PointR2 {\n    return this._geoProjection.project.apply(this._geoProjection, arguments);\n  }\n\n  unproject(point: AnyPointR2): GeoPoint;\n  unproject(x: number, y: number): GeoPoint;\n  unproject(x: AnyPointR2 | number, y?: number): GeoPoint {\n    return this._geoProjection.unproject.apply(this._geoProjection, arguments);\n  }\n\n  get geoProjection(): EsriSceneViewProjection {\n    return this._geoProjection;\n  }\n\n  setGeoProjection(geoProjection: EsriSceneViewProjection): void {\n    this.willSetGeoProjection(geoProjection);\n    this._geoProjection = geoProjection;\n    this.onSetGeoProjection(geoProjection);\n    this.didSetGeoProjection(geoProjection);\n  }\n\n  get mapZoom(): number {\n    return this._mapZoom;\n  }\n\n  setMapZoom(newMapZoom: number): void {\n    const oldMapZoom = this._mapZoom;\n    if (oldMapZoom !== newMapZoom) {\n      this.willSetMapZoom(newMapZoom, oldMapZoom);\n      this._mapZoom = newMapZoom;\n      this.onSetMapZoom(newMapZoom, oldMapZoom);\n      this.didSetMapZoom(newMapZoom, oldMapZoom);\n    }\n  }\n\n  get mapHeading(): number {\n    return this._mapHeading;\n  }\n\n  get mapTilt(): number {\n    return this._mapTilt;\n  }\n\n  get geoFrame(): GeoBox {\n    let extent = this._map.extent;\n    if (extent !== null) {\n      extent = EsriProjection.webMercatorUtils!.webMercatorToGeographic(extent) as __esri.Extent;\n    }\n    if (extent !== null) {\n      return new GeoBox(extent.xmin, extent.ymin, extent.xmax, extent.ymax);\n    } else {\n      return GeoBox.globe();\n    }\n  }\n\n  protected onMapRender(): void {\n    this._mapHeading = this._map.camera.heading;\n    this._mapTilt = this._map.camera.tilt;\n    this.setMapZoom(this._map.zoom);\n    this.setGeoProjection(this._geoProjection);\n  }\n\n  overlayCanvas(): CanvasView | null {\n    if (this._parentView !== null) {\n      return this.canvasView;\n    } else {\n      const map = this._map;\n      const container = View.fromNode(map.container);\n      const esriViewRoot = View.fromNode(container.node.querySelector(\".esri-view-root\") as HTMLDivElement);\n      const esriViewSurface = View.fromNode(esriViewRoot.node.querySelector(\".esri-view-surface\") as HTMLDivElement);\n      const canvas = esriViewSurface.append(\"canvas\");\n      canvas.append(this);\n      return canvas;\n    }\n  }\n}\n","// Copyright 2015-2020 SWIM.AI inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {EsriViewController} from \"./EsriViewController\";\nimport {EsriSceneViewProjection} from \"./EsriSceneViewProjection\";\nimport {EsriSceneView} from \"./EsriSceneView\";\nimport {EsriSceneViewObserver} from \"./EsriSceneViewObserver\";\n\nexport class EsriSceneViewController<V extends EsriSceneView = EsriSceneView> extends EsriViewController<V> implements EsriSceneViewObserver<V> {\n  viewWillSetGeoProjection(geoProjection: EsriSceneViewProjection, view: V): void {\n    // hook\n  }\n\n  viewDidSetGeoProjection(geoProjection: EsriSceneViewProjection, view: V): void {\n    // hook\n  }\n}\n","import {Value} from \"@swim/core\";\nimport {NodeRef} from \"@swim/mesh\";\nimport {Color, ColorInterpolator, Ease, Transition} from \"@swim/ui\";\nimport {MapView, MapCircleView} from \"@swim/map\";\n\nconst INFO_COLOR = Color.parse(\"#44d7b6\");\nconst WARN_COLOR = Color.parse(\"#f9f070\");\nconst ALERT_COLOR = Color.parse(\"#f6511d\");\nconst WARN_INTERPOLATOR = ColorInterpolator.between(INFO_COLOR, WARN_COLOR);\nconst ALERT_INTERPOLATOR = ColorInterpolator.between(WARN_COLOR, ALERT_COLOR);\nconst STATUS_TWEEN = Transition.duration<any>(500, Ease.cubicOut);\n\nexport class SiteMapView extends MapCircleView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this._nodeRef = nodeRef;\n  }\n\n  onSetStatus(newStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" onSetStatus:\", newStatus.toAny());\n    const severity = newStatus.get(\"severity\").numberValue(void 0);\n    if (severity !== void 0) {\n      if (severity === 0) {\n        this.fill(INFO_COLOR, STATUS_TWEEN);\n      } else if (severity <= 1) {\n        const color = WARN_INTERPOLATOR.interpolate(severity);\n        this.fill(color, STATUS_TWEEN);\n        this.ripple(color, 1, 2500);\n      } else {\n        const color = ALERT_INTERPOLATOR.interpolate(severity - 1);\n        this.fill(color, STATUS_TWEEN);\n        this.ripple(color, 2, 5000);\n      }\n    }\n  }\n\n  ripple(color: Color, width: number, duration: number): void {\n    const rootMapView = this.rootMapView;\n    if (!this.isHidden() && !this.isCulled() && !document.hidden && this.geoBounds.intersects(rootMapView.geoFrame)) {\n      const ripple = new MapCircleView()\n          .geoCenter(this.geoCenter.value)\n          .radius(0)\n          .stroke(color)\n          .strokeWidth(width);\n      rootMapView.appendChildView(ripple);\n      const frame = rootMapView.viewFrame;\n      const radius = Math.min(frame.width, frame.height) / 8;\n      const tween = Transition.duration<any>(duration);\n      ripple.stroke(color.alpha(0), tween)\n            .radius(radius, tween.onEnd(function () { ripple.remove(); }));\n    }\n  }\n\n  get rootMapView(): MapView {\n    let rootMapView: MapView = this;\n    do {\n      const parentView = rootMapView.parentView;\n      if (MapView.is(parentView)) {\n        rootMapView = parentView;\n        continue;\n      }\n      break;\n    } while (true);\n    return rootMapView;\n  }\n}\n","import {Value} from \"@swim/core\";\nimport {\n  ValueDownlink,\n  MapDownlink,\n  NodeRef,\n} from \"@swim/mesh\";\nimport {\n  AnyLength,\n  Length,\n  AnyColor,\n  Color,\n  ColorInterpolator,\n  Ease,\n  Transition,\n  View,\n  MemberAnimator,\n  FillView,\n  StrokeView,\n} from \"@swim/ui\";\nimport {\n  AnyGeoPoint,\n  GeoBox,\n  MapViewContext,\n  MapView,\n  MapLayerView,\n  MapGroupView,\n  MapPolygonView,\n} from \"@swim/maps\";\nimport {SiteMapView} from \"./SiteMapView\";\n\nconst INFO_COLOR = Color.parse(\"#44d7b6\").alpha(0.1);\nconst WARN_COLOR = Color.parse(\"#f9f070\").alpha(0.1);\nconst ALERT_COLOR = Color.parse(\"#f6511d\").alpha(0.1);\nconst WARN_INTERPOLATOR = ColorInterpolator.between(INFO_COLOR, WARN_COLOR);\nconst ALERT_INTERPOLATOR = ColorInterpolator.between(WARN_COLOR, ALERT_COLOR);\nconst STATUS_TWEEN = Transition.duration<any>(5000, Ease.cubicOut);\n\nexport class RegionMapView extends MapLayerView implements FillView, StrokeView {\n  /** @hidden */\n  readonly _nodeRef: NodeRef;\n  /** @hidden */\n  _minZoom: number;\n  /** @hidden */\n  _maxZoom: number;\n  /** @hidden */\n  _minSubRegionZoom: number;\n  /** @hidden */\n  _minSiteZoom: number;\n  /** @hidden */\n  _statusLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _geometryLink: ValueDownlink<Value> | null;\n  /** @hidden */\n  _subRegionsLink: MapDownlink<Value, Value> | null;\n  /** @hidden */\n  _sitesLink: MapDownlink<Value, Value> | null;\n\n  constructor(nodeRef: NodeRef) {\n    super();\n    this._nodeRef = nodeRef;\n    this._minZoom = -Infinity;\n    this._maxZoom = Infinity;\n    this._minSubRegionZoom = Infinity;\n    this._minSiteZoom = Infinity;\n    this._statusLink = null;\n    this._geometryLink = null;\n    this._subRegionsLink = null;\n    this._sitesLink = null;\n  }\n\n  @MemberAnimator(Color, {value: Color.parse(\"#44d7b6\").alpha(0.1)})\n  fill: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Color)\n  stroke: MemberAnimator<this, Color, AnyColor>;\n\n  @MemberAnimator(Length)\n  strokeWidth: MemberAnimator<this, Length, AnyLength>;\n\n  onSetStatus(newStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" onSetStatus: \" + newStatus);\n    const siteCount = newStatus.get(\"siteCount\").numberValue(0);\n    const warnCount = newStatus.get(\"warnCount\").numberValue(0);\n    const alertCount = newStatus.get(\"alertCount\").numberValue(0);\n    const warnRatio = warnCount / siteCount;\n    const alertRatio = alertCount / siteCount;\n    if (alertRatio > 0.015) {\n      this.fill(ALERT_INTERPOLATOR.interpolate(Math.min((1 / 0.005) * (alertRatio - 0.015), 1)), STATUS_TWEEN);\n    } else if (warnRatio > 0.15) {\n      this.fill(WARN_INTERPOLATOR.interpolate(Math.min((1 / 0.05) * (warnRatio - 0.15), 1)), STATUS_TWEEN);\n    } else {\n      this.fill(INFO_COLOR, STATUS_TWEEN);\n    }\n  }\n\n  protected onSetGeometry(newGeometry: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" onSetGeometry:\", newGeometry.toAny());\n    const minZoom = newGeometry.get(\"minZoom\").numberValue(void 0);\n    if (minZoom !== void 0) {\n      this._minZoom = minZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n    const maxZoom = newGeometry.get(\"maxZoom\").numberValue(void 0);\n    if (maxZoom !== void 0) {\n      this._maxZoom = maxZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n    const minSubRegionZoom = newGeometry.get(\"minSubRegionZoom\").numberValue(void 0);\n    if (minSubRegionZoom !== void 0) {\n      this._minSubRegionZoom = minSubRegionZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n    const minSiteZoom = newGeometry.get(\"minSiteZoom\").numberValue(void 0);\n    if (minSiteZoom !== void 0) {\n      this._minSiteZoom = minSiteZoom;\n      this.requireUpdate(View.NeedsProject);\n    }\n\n    const type = newGeometry.get(\"type\").stringValue(void 0);\n    if (type !== void 0) {\n      let geometryView = this.getChildView(\"geometry\") as MapGroupView | null;\n      if (geometryView === null) {\n        geometryView = new MapGroupView();\n        this.setChildView(\"geometry\", geometryView);\n      } else {\n        geometryView.removeAll();\n      }\n      if (type === \"Polygon\") {\n        const coordinates = newGeometry.get(\"coordinates\").toAny() as AnyGeoPoint[][];\n        geometryView.append(MapPolygonView).points(coordinates[0]);\n      } else if (type === \"MultiPolygon\") {\n        const coordinates = newGeometry.get(\"coordinates\").toAny() as AnyGeoPoint[][][];\n        for (let i = 0; i < coordinates.length; i += 1) {\n          geometryView.append(MapPolygonView).points(coordinates[i][0]);\n        }\n      }\n    }\n  }\n\n  protected onUpdateSubRegion(key: Value, newSubRegionStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" onUpdateSubRegion \" + key.toAny() + \":\", newSubRegionStatus.toAny());\n    const subRegionNodeUri = key.stringValue()!;\n    let subRegionMapView = this.getChildView(subRegionNodeUri) as RegionMapView | null;\n    if (subRegionMapView === null) {\n      const subRegionNodeRef = this._nodeRef.nodeRef(subRegionNodeUri);\n      subRegionMapView = new RegionMapView(subRegionNodeRef);\n      this.setChildView(subRegionNodeUri, subRegionMapView);\n    }\n    subRegionMapView.onSetStatus(newSubRegionStatus);\n  }\n\n  protected onRemoveSubRegion(key: Value, oldSubRegionStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" onUpdateSubRegion \" + key.toAny() + \":\", oldSubRegionStatus.toAny());\n    const subRegionNodeUri = key.stringValue()!;\n    this.removeChildView(subRegionNodeUri);\n  }\n\n  protected onUpdateSite(key: Value, newSiteStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" onUpdateSite \" + key.toAny() + \":\", newSiteStatus.toAny());\n    const siteNodeUri = key.stringValue()!;\n    let siteMapView = this.getChildView(siteNodeUri) as SiteMapView | null;\n    if (siteMapView === null) {\n      const siteNodeRef = this._nodeRef.nodeRef(siteNodeUri);\n      const coordinates = newSiteStatus.get(\"coordinates\").toAny() as AnyGeoPoint;\n      siteMapView = new SiteMapView(siteNodeRef)\n          .geoCenter(coordinates)\n          .radius(4)\n          .fill(this.fill.value!.alpha(1));\n      this.setChildView(siteNodeUri, siteMapView);\n    }\n    siteMapView.onSetStatus(newSiteStatus);\n  }\n\n  protected onRemoveSite(key: Value, oldSiteStatus: Value): void {\n    //console.log(this._nodeRef.nodeUri() + \" onRemoveSite \" + key.toAny() + \":\", oldSiteStatus.toAny());\n    const siteNodeUri = key.stringValue()!;\n    this.removeChildView(siteNodeUri);\n  }\n\n  protected onMount(): void {\n    super.onMount();\n    //this.linkStatus();\n    this.linkGeometry();\n  }\n\n  protected onUnmount(): void {\n    this.unlinkStatus();\n    this.unlinkGeometry();\n    this.unlinkSubRegions();\n    this.unlinkSites();\n    super.onUnmount();\n  }\n\n  protected didProject(viewContext: MapViewContext): void {\n    const geometryView = this.getChildView(\"geometry\") as MapGroupView | null;\n    let geometryBounds: GeoBox;\n    if (geometryView !== null) {\n      geometryView.setHidden(viewContext.mapZoom >= this._maxZoom);\n      geometryBounds = geometryView.geoBounds;\n    } else {\n      geometryBounds = viewContext.geoFrame;\n    }\n    this.setHidden(viewContext.mapZoom < this._minZoom);\n    if (viewContext.mapZoom >= this._minSubRegionZoom && geometryBounds.intersects(viewContext.geoFrame)) {\n      this.linkSubRegions();\n    } else {\n      this.unlinkSubRegions();\n    }\n    if (viewContext.mapZoom >= this._minSiteZoom && geometryBounds.intersects(viewContext.geoFrame)) {\n      this.linkSites();\n    } else {\n      this.unlinkSites();\n    }\n    super.didProject(viewContext);\n  }\n\n  protected linkStatus(): void {\n    if (this._statusLink === null) {\n      this._statusLink = this._nodeRef.downlinkValue()\n          .laneUri(\"status\")\n          .didSet(this.onSetStatus.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkStatus(): void {\n    if (this._statusLink !== null) {\n      this._statusLink.close();\n      this._statusLink = null;\n    }\n  }\n\n  protected linkGeometry(): void {\n    if (this._geometryLink === null) {\n      this._geometryLink = this._nodeRef.downlinkValue()\n          .laneUri(\"geometry\")\n          .didSet(this.onSetGeometry.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkGeometry(): void {\n    if (this._geometryLink !== null) {\n      this._geometryLink.close();\n      this._geometryLink = null;\n    }\n  }\n\n  protected linkSubRegions(): void {\n    if (this._subRegionsLink === null) {\n      this._subRegionsLink = this._nodeRef.downlinkMap()\n          .laneUri(\"subRegions\")\n          .didUpdate(this.onUpdateSubRegion.bind(this))\n          .didRemove(this.onRemoveSubRegion.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkSubRegions(): void {\n    if (this._subRegionsLink !== null) {\n      this._subRegionsLink.close();\n      this._subRegionsLink = null;\n      this._childViews.forEach(function (view: MapView): void {\n        if (view instanceof RegionMapView) {\n          view.remove();\n        }\n      }, this);\n    }\n  }\n\n  protected linkSites(): void {\n    if (this._sitesLink === null) {\n      //console.log(this._nodeRef.nodeUri() + \" linkSites\");\n      //this.tileOutlineColor(\"#cc0000\");\n      this._sitesLink = this._nodeRef.downlinkMap()\n          .laneUri(\"sites\")\n          .didUpdate(this.onUpdateSite.bind(this))\n          .didRemove(this.onRemoveSite.bind(this))\n          .open();\n    }\n  }\n\n  protected unlinkSites(): void {\n    if (this._sitesLink !== null) {\n      //console.log(this._nodeRef.nodeUri() + \" unlinkSites\");\n      //this.tileOutlineColor(void 0);\n      this._sitesLink.close();\n      this._sitesLink = null;\n      this._childViews.forEach(function (view: MapView): void {\n        if (view instanceof SiteMapView) {\n          view.remove();\n        }\n      }, this);\n    }\n  }\n}\n"],"names":["GeoBox","PointR2","GeoPoint","View","MapGraphicsView","MapGraphicsViewController","Color","ColorInterpolator","Transition","Ease","MapCircleView","MapView","INFO_COLOR","WARN_COLOR","ALERT_COLOR","WARN_INTERPOLATOR","ALERT_INTERPOLATOR","STATUS_TWEEN","MapGroupView","MapPolygonView","MemberAnimator","Length","MapLayerView"],"mappings":"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"}